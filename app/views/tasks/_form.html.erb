<div>
  <%= form_for @task do |f|%>
    <div>
      <%= f.label :name %>
      <%= f.text_field :name %>
    </div>

    <div>
      <%= f.label :description %>
      <%= f.text_area :description %>
    </div>

    <div>
      <%= f.label :due_date %>
      <%= f.date_field :due_date %>
    </div>

    <div>
      <%= f.label :category_id %>
      <%#= f.number_field :category_id %>
      <%#= f.select :category_id, @categories.inject({}){|item1, item2| item1[item2[:name]] = item2[:id]; item1 } %>
      <%= f.collection_select :category_id, Category.all, :id, :name %>
    </div>

    <div id="participating-users">
      <%= f.fields_for :participating_users, Participant.new do | p | %>
        <%= render 'participating_user_fields', f: p %>
      <% end %>

      <%= link_to_add_association 'Agregar participante', f, :participating_users %>
    </div>


    
    <div>
      <%= f.submit %>
    </div>

  <% end %>
</div>

<script>
  PLATZI.tasks.form.setup();
</script>